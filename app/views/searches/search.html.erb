<div class="container py-5" style="display: flex; justify-content: center; align-items: center;">
  <% if user_signed_in? %>
    <div class="search_form pt-5">
      <%= form_with url: search_path, local: true, method: :get do |f| %>
        <%= f.text_field :word, size: 50 %>
        <%= f.select :range, options_for_select([['User'], ['Post']]) %>
        <%= f.submit "検索", class: "btn btn-primary" %>
      <% end %>
    </div>
  <% end %>
</div>






  <!--検索対象モデルがUserの時 -->

<% if @range == "User" %>
  <div class="container" style="display: flex; justify-content: center; align-items: center;">
    <h2>Results index</h2>
  </div>
  <div class="card-list-container py-5">
    <% @users.each do |user| %>
      <div class="card mx-auto mt-4 shadow-lg" style="width: 70%;">
        <div class="card-body">
          <div class="card-title">
            <div class="row">
              <div class="col-10">
                <%= link_to users_my_page_path(user.id) do %>
                  <%= image_tag user.get_user_image(100,100), class: "mt-3 rounded-circle img-thumbnail"; %>
                  <strong><%= user.user_name %></strong>
                <% end %>
              </div>
              <div class="text-right pt-4">
                <% if current_user.following?(user) %>
                  <%= link_to "フォロー中", user_followings_path(user.id), method: :delete, class: 'btn btn-secondary' %>
                <% else %>
                   <%= link_to "フォローする", user_followings_path(user.id), method: :post, class: 'btn btn-success' %>
                <% end %>
              </div>
            </div>
            <div class="row pt-5">
              <div class="card-text pl-3">
                <%= user.profile %>
              </div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>

<!--検索対象モデルがUserではない時(= 検索対象モデルがPostの時) -->
<% elsif @range == "Post"%>
  <div class="container" style="display: flex; justify-content: center; align-items: center;">
    <h2>Results index</h2>
  </div>
  <div class="card-list-container py-5">
    <% @posts.each do |posts| %>
      <div class="card mx-auto mt-4 shadow-lg" style="width: 70%;">
        <div class="card-body">
          <div class="card-title">
            <div class="row">
              <div class="col-10">
                 <%= link_to users_my_page_path(posts.user.id) do %>
                  <%= image_tag posts.user.get_user_image(100,100), class: "mt-3 rounded-circle img-thumbnail"; %>
                  <strong><%= posts.user.user_name %></strong>
                <% end %>
              </div>
              <div class="text-right pt-4">
                <% if posts.user == current_user %>
                  <%= link_to "削除", post_path(posts.id), method: :delete, class:"btn btn-sm btn-danger", data: {confirm: "本当に消しますか？"} %>
                <% elsif current_user.following?(posts.user) %>
                  <%= link_to "フォロー中", user_followings_path(posts.user.id), method: :delete, class: 'btn btn-secondary' %>
                <% else %>
                  <%= link_to "フォロー", user_followings_path(posts.user.id), method: :post, class: 'btn btn-success' %>
                <% end %>
              </div>
            </div>
            <%= link_to post_path(posts.id) do %>
              <div class="row py-5">
                <div class="card-text pl-3">
                  <%= posts.post_text %>
                </div>
              </div>
              <div class="row">
                <% if posts.image.attached? %>
                  <%= image_tag posts.image, class: "card-img-top img-thumbnail"; %>
                <%else%>
                <%end%>
              </div>
            <% end %>
            <div class="row mt-4" style="display: flex; justify-content: center; align-items: center;">
              <% if posts.liked_by?(current_user) %>
                <%= link_to post_likes_path(posts), method: :delete do %>
                  <i class="fa-solid fa-heart"></i><%= posts.likes.count %>
                <% end %>
              <% else %>
                <%= link_to post_likes_path(posts), method: :post do %>
                  <i class="fa-regular fa-heart"></i><%= posts.likes.count %>
                <% end %>
              <% end %>
              <%= link_to post_path(posts.id), class: "ml-4" do %>
                <i class="fa-regular fa-comment"></i><%= posts.comments.count %>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
<% else %>

<% end %>
